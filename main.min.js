const table=document.getElementById("table"),loadingscreen=document.getElementById("loading-img"),api_url="http://localhost:5001/api";var beers;let tid=setInterval(function(){"complete"===document.readyState&&(clearInterval(tid),loadingscreen.style.display="none",table.style.display="block")},100);function CreateModal(e){document.getElementsByTagName("modal")[0]||fetch(`${api_url}/bier/${e}`).then(e=>e.json()).then(e=>{document.getElementsByTagName("section")[0].innerHTML+=`\n                <modal class="animated BounceIn">\n                    <nav>\n                        <span>${e.naam}</span>\n                        <a onclick="RemoveModal();">&#x292B;</a>\n                    </nav>\n                    <div>\n                        <form>\n                            <fieldset>\n                                <legend>Verander informatie voor het biertje ${e.naam}:</legend>\n                                Brouwer:<br>\n                                <input type="text" name="Brewer" value="${e.brouwer}">\n                                <br><br>\n                                Naam:<br>\n                                <input type="text" name="name" value="${e.naam}">\n                                <br><br>\n                                Gisting:<br>\n                                <input type="text" name="Fermentation" value="${e.gisting}">\n                                <br><br>\n                                Percentage:<br>\n                                <input type="text" name="percentage" value="${e.perc}">\n                                <br><br>\n                                Type:<br>\n                                <input type="text" name="type" value="${e.type}">\n                                <br><br>\n                                Inkoop prijs:<br>\n                                <input type="text" name="price" value="${e.inkoopPrijs}">\n                                <br><br>\n                                <input type="button" value="Verander" onclick="SubmitForm(${e.id});"> <input type="button" value="Verwijder" onclick="removeItem(${e.id});"> \n                            </fieldset>\n                    </form>\n                    </div>\n                </modal>`})}function addItemModal(){document.getElementsByTagName("modal")[0]||(document.getElementsByTagName("section")[0].innerHTML+='\n                <modal class="animated BounceIn">\n                    <nav>\n                        <span>Biertje toevoegen</span>\n                        <a onclick="RemoveModal();">&#x292B;</a>\n                    </nav>\n                    <div>\n                        <form>\n                            <fieldset>\n                                <legend>Voeg een biertje toe die nog niet in de lijst staat:</legend>\n                                Brouwer:<br>\n                                <input type="text" name="Brewer">\n                                <br><br>\n                                Naam:<br>\n                                <input type="text" name="name">\n                                <br><br>\n                                Gisting:<br>\n                                <input type="text" name="Fermentation">\n                                <br><br>\n                                Percentage:<br>\n                                <input type="text" name="percentage">\n                                <br><br>\n                                Type:<br>\n                                <input type="text" name="type">\n                                <br><br>\n                                Inkoop prijs:<br>\n                                <input type="text" name="price">\n                                <br><br>\n                                <input type="button" value="Verander" onclick="addItem();">\n                            </fieldset>\n                    </form>\n                    </div>\n                </modal>')}function RemoveModal(){document.getElementsByTagName("modal")[0].remove()}function SubmitForm(e,n){var t=new Object;t.Id=e,t.Naam=document.getElementsByName("name")[0].value,t.Brouwer=document.getElementsByName("Brewer")[0].value,t.Type=document.getElementsByName("type")[0].value,t.Gisting=document.getElementsByName("Fermentation")[0].value,t.Perc=document.getElementsByName("percentage")[0].value,t.inkoopPrijs=document.getElementsByName("price")[0].value;try{fetch(`${api_url}/bier/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(JSON.stringify(e))})}catch(e){console.log(e)}}function removeItem(e){fetch(`${api_url}/bier/${e}`,{method:"DELETE"}).then(e=>{console.log(e)})}fetch(`${api_url}/bier`).then(e=>e.json()).then(e=>{console.log(e),beers=e,e.forEach(e=>{table.innerHTML+=`<tr onclick="CreateModal(${e.id})" >\n                <th>${e.id}</th>\n                <th>${e.brouwer}</th>\n                <th>${e.gisting}</th>\n                <th>${e.naam}</th>\n                <th>${Math.round(100*e.perc).toFixed(2)}%</th>\n                <th>${e.type}</th>\n                <th>${e.inkoopPrijs}</th>\n            </tr>`})});